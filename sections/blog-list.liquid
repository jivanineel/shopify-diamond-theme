<section
  class="blog-list"
  style="padding: {{ section.settings.padding-top }}px 0 {{ section.settings.padding-bottom }}px;"
>
  <div class="main-container">
    <h1 class="section-title" style="margin-bottom: {{ section.settings.title-margin-bottom }}px">
      {{ section.settings.section_title }}
    </h1>
    <p class="section-sub-title" style="margin-bottom: {{ section.settings.sub-margin-bottom }}px">
      {{ section.settings.section_sub_title }}
    </p>

    <div class="blog-list-contain">
      {% for block in section.blocks %}
        {% assign article = articles[block.settings.blog_article] %}
        {% if article %}
          <a href="{{ article.url }}" class="blog-list-item" {{ block.shopify_attributes }}>
            <div class="blog-list-image">
              {% if article.image %}
                <img
                  src="{{ article.image | image_url: width: 1000 }}"
                  alt="{{ article.image.alt | escape }}"
                  loading="lazy"
                  width=""
                  height=""
                >
              {% endif %}
            </div>

            <div class="blog-list-content">
              <div class="blog-list-title">{{ article.title }}</div>
              <div class="blog-list-description">
                {{ article.excerpt | strip_html | truncate: 120 }}
              </div>

              <!-- Debug info for local dev -->
              <div style="font-size: 12px; color: #777; margin-top: 10px;">
                Blog: <strong>{{ article.blog.handle }}</strong><br>
                Handle: <strong>{{ article.handle }}</strong><br>
                URL: <strong>{{ article.url }}</strong>
              </div>
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Blog List",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Blog List"
    },
    {
      "type": "number",
      "id": "title-margin-bottom",
      "label": "Title Margin Bottom",
      "default": 20
    },
    {
      "type": "text",
      "id": "section_sub_title",
      "label": "Section Sub Title",
      "default": "Latest articles from our blog"
    },
    {
      "type": "number",
      "id": "sub-margin-bottom",
      "label": "Sub Title Margin Bottom",
      "default": 20
    },
    {
      "type": "number",
      "id": "padding-top",
      "label": "Padding Top",
      "default": 60
    },
    {
      "type": "number",
      "id": "padding-bottom",
      "label": "Padding Bottom",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "article-block",
      "name": "Blog Article",
      "settings": [
        {
          "type": "article",
          "id": "blog_article",
          "label": "Select Blog Article"
        }
      ]
    }
  ],
  "max_blocks": 18,
  "presets": [
    {
      "name": "Blog List",
      "blocks": []
    }
  ]
}
{% endschema %}

<style>
  .blog-list{
    padding: {{ section.settings.padding-top }}px 0 {{ section.settings.padding-bottom }}px;
  }
</style>

{% stylesheet %}
  .blog-list-contain {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
  }

  .blog-list-title a {
    font-size: 24px;
    line-height: 100%;
    font-weight: 400;
    color: #000000;
    text-decoration: none;
  }

  .blog-list-item {
    max-width: 400px;
    width: 100%;
  }

  .blog-list-description {
    font-size: 16px;
  }

  @media (max-width: 991px) {
    .blog-list {
      padding: 70px 0 !important;
    }
  }

  @media (max-width: 767px) {
    .blog-list {
      padding: 50px 0 !important;
    }

    .blog-list-title a {
      font-size: 22px;
    }
  }
  @media (max-width: 575px) {
    .blog-list {
      padding: 30px 0 !important;
    }

    .blog-list-title a {
      font-size: 18px;
    }

    .blog-list-description {
      font-size: 14px;
    }
  }
{% endstylesheet %}
